import DatePicker from "react-datepicker";
import "react-datepicker/dist/react-datepicker.css";
import './SelectPeriod.scss'
import { useState } from "react";

interface ISelectDate {
  value: Date | null
  setValue: (value: Date | null) => void
}

const SelectDate = ({value, setValue}: ISelectDate) => {
  const handleChange = (date: Date | null) => {
    if(date){
      setValue(date)
    }
  }

  return (
    <>
      <div className="date__wrapper">
        <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M1.5 9C1.5 6.17175 1.5 4.75725 2.379 3.879C3.258 3.00075 4.67175 3 7.5 3H10.5C13.3282 3 14.7427 3 15.621 3.879C16.4992 4.758 16.5 6.17175 16.5 9V10.5C16.5 13.3282 16.5 14.7427 15.621 15.621C14.742 16.4992 13.3282 16.5 10.5 16.5H7.5C4.67175 16.5 3.25725 16.5 2.379 15.621C1.50075 14.742 1.5 13.3282 1.5 10.5V9Z" stroke="#4299FF" stroke-width="1.5"/>
          <path d="M5.25 3V1.875M12.75 3V1.875M1.875 6.75H16.125" stroke="#4299FF" strokeWidth="1.5" strokeLinecap="round"/>
          <path d="M13.5 12.75C13.5 12.9489 13.421 13.1397 13.2803 13.2803C13.1397 13.421 12.9489 13.5 12.75 13.5C12.5511 13.5 12.3603 13.421 12.2197 13.2803C12.079 13.1397 12 12.9489 12 12.75C12 12.5511 12.079 12.3603 12.2197 12.2197C12.3603 12.079 12.5511 12 12.75 12C12.9489 12 13.1397 12.079 13.2803 12.2197C13.421 12.3603 13.5 12.5511 13.5 12.75ZM13.5 9.75C13.5 9.94891 13.421 10.1397 13.2803 10.2803C13.1397 10.421 12.9489 10.5 12.75 10.5C12.5511 10.5 12.3603 10.421 12.2197 10.2803C12.079 10.1397 12 9.94891 12 9.75C12 9.55109 12.079 9.36032 12.2197 9.21967C12.3603 9.07902 12.5511 9 12.75 9C12.9489 9 13.1397 9.07902 13.2803 9.21967C13.421 9.36032 13.5 9.55109 13.5 9.75ZM9.75 12.75C9.75 12.9489 9.67098 13.1397 9.53033 13.2803C9.38968 13.421 9.19891 13.5 9 13.5C8.80109 13.5 8.61032 13.421 8.46967 13.2803C8.32902 13.1397 8.25 12.9489 8.25 12.75C8.25 12.5511 8.32902 12.3603 8.46967 12.2197C8.61032 12.079 8.80109 12 9 12C9.19891 12 9.38968 12.079 9.53033 12.2197C9.67098 12.3603 9.75 12.5511 9.75 12.75ZM9.75 9.75C9.75 9.94891 9.67098 10.1397 9.53033 10.2803C9.38968 10.421 9.19891 10.5 9 10.5C8.80109 10.5 8.61032 10.421 8.46967 10.2803C8.32902 10.1397 8.25 9.94891 8.25 9.75C8.25 9.55109 8.32902 9.36032 8.46967 9.21967C8.61032 9.07902 8.80109 9 9 9C9.19891 9 9.38968 9.07902 9.53033 9.21967C9.67098 9.36032 9.75 9.55109 9.75 9.75ZM6 12.75C6 12.9489 5.92098 13.1397 5.78033 13.2803C5.63968 13.421 5.44891 13.5 5.25 13.5C5.05109 13.5 4.86032 13.421 4.71967 13.2803C4.57902 13.1397 4.5 12.9489 4.5 12.75C4.5 12.5511 4.57902 12.3603 4.71967 12.2197C4.86032 12.079 5.05109 12 5.25 12C5.44891 12 5.63968 12.079 5.78033 12.2197C5.92098 12.3603 6 12.5511 6 12.75ZM6 9.75C6 9.94891 5.92098 10.1397 5.78033 10.2803C5.63968 10.421 5.44891 10.5 5.25 10.5C5.05109 10.5 4.86032 10.421 4.71967 10.2803C4.57902 10.1397 4.5 9.94891 4.5 9.75C4.5 9.55109 4.57902 9.36032 4.71967 9.21967C4.86032 9.07902 5.05109 9 5.25 9C5.44891 9 5.63968 9.07902 5.78033 9.21967C5.92098 9.36032 6 9.55109 6 9.75Z" fill="#4299FF"/>
        </svg>

        <DatePicker
          selected={value}
          onChange={handleChange}
          dateFormat="d.MM.yyyy"
          className="date-picker"
        />
      </div>
    </>
  )
}

export const SelectPeriod = () => {
  const [fromDate, setFromDate] = useState<Date | null>(new Date());
  const [toDate, setToDate] = useState<Date | null>(new Date());

  return (
    <div className='select-period'>
      <p className='select-period__title'>Период:</p>
        <SelectDate value={fromDate} setValue={setFromDate} />
        <div className="select-period__svg">
          <svg style={{marginRight: '-5px'}} xmlns="http://www.w3.org/2000/svg" width="19" height="2" viewBox="0 0 19 1">
            <rect width="19" height="2" fill="#4299FF"/>
          </svg>

          <svg width="8" height="12" viewBox="0 0 8 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4.70993 5.99981L1.16993 9.53981C0.983683 9.72717 0.879142 9.98062 0.879142 10.2448C0.879142 10.509 0.983683 10.7624 1.16993 10.9498C1.2629 11.0435 1.3735 11.1179 1.49536 11.1687C1.61722 11.2195 1.74792 11.2456 1.87993 11.2456C2.01195 11.2456 2.14265 11.2195 2.26451 11.1687C2.38637 11.1179 2.49697 11.0435 2.58993 10.9498L6.82993 6.70981C6.92366 6.61684 6.99806 6.50624 7.04883 6.38438C7.09959 6.26253 7.12573 6.13182 7.12573 5.99981C7.12573 5.8678 7.09959 5.73709 7.04883 5.61523C6.99806 5.49337 6.92366 5.38277 6.82993 5.28981L2.58994 0.999807C2.4965 0.907126 2.38568 0.833801 2.26384 0.784036C2.142 0.734272 2.01154 0.709045 1.87994 0.709806C1.74833 0.709045 1.61787 0.734272 1.49603 0.784036C1.37419 0.833801 1.26338 0.907126 1.16994 0.999807C0.983684 1.18717 0.879143 1.44062 0.879143 1.70481C0.879143 1.96899 0.983684 2.22244 1.16994 2.40981L4.70993 5.99981Z" fill="#4299FF"/>
          </svg>
        </div>
        <SelectDate value={toDate} setValue={setToDate} />
    </div>
  );
};